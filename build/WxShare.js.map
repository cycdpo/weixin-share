{"version":3,"sources":["webpack://WxShare/webpack/universalModuleDefinition","webpack://WxShare/webpack/bootstrap","webpack://WxShare/./node_modules/@cycjimmy/awesome-js-funcs/designPattern/CreateInstance.js","webpack://WxShare/./node_modules/object-assign/index.js","webpack://WxShare/./src/index.js"],"names":["instance","newInstance","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","undefined","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","map","n","join","test3","split","forEach","letter","keys","err","module","exports","target","source","from","to","symbols","s","arguments","length","key","call","_instance","CreateInstance","WX_JSSDK_URL","WxShare","isConfigReady","wx","wxConfig","readyCallBack","shareSuccessCallBack","defaultShare","title","document","desc","link","window","location","href","replace","imgUrl","_isInitDefaultShare","config","debug","appId","timestamp","nonceStr","signature","jsApiList","setReadyCallBack","setShareSuccessCallBack","setDefaultShare","objectAssign","share","shareData","console","log","Promise","resolve","then","_initWxSDK","_ready","_oldShareData","success","res","onMenuShareWeibo","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","updateAppMessageShareData","updateTimelineShareData","backToDefault","_setWX","oScript","createElement","type","onload","src","querySelector","appendChild","ready"],"mappings":"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","file":"WxShare.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WxShare\"] = factory();\n\telse\n\t\troot[\"WxShare\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/**\n * 单例模式构造函数(设计模式)\n * @returns {function(*=)}\n * @constructor\n */\nexport default (function () {\n  var instance;\n  return function (newInstance) {\n    if (newInstance) {\n      instance = newInstance;\n    }\n\n    return instance;\n  };\n});","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// constructor\nimport CreateInstance from '@cycjimmy/awesome-js-funcs/designPattern/CreateInstance';\n\n// polyfill\nimport objectAssign from 'object-assign';\n\nconst _instance = new CreateInstance();\n\nconst WX_JSSDK_URL = 'https://res.wx.qq.com/open/js/jweixin-1.4.0.js';\n\nexport default class WxShare {\n  constructor() {\n    if (_instance()) {\n      return _instance();\n    }\n    this.isConfigReady = false;\n    this.wx = null;\n    this.wxConfig = {};\n    this.readyCallBack = () => {\n    };\n    this.shareSuccessCallBack = () => {\n    };\n\n    this.defaultShare = {\n      title: document.title,\n      desc: '',\n      link: window.location.href.replace(/(\\?|#).*/g, ''),\n      imgUrl: '',\n    };\n    this._isInitDefaultShare = false;\n\n    _instance(this);\n  };\n\n  /**\n   * config\n   * @param configData\n   * {\n   *  debug: false,\n   *  appId: '',\n   *  timestamp: 0,\n   *  nonceStr: '',\n   *  signature: '',\n   *  jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareQZone', 'onMenuShareWeibo'],\n   * }\n   */\n  config({\n           debug = false,\n           appId,\n           timestamp,\n           nonceStr,\n           signature,\n           jsApiList = [\n             'onMenuShareTimeline',\n             'onMenuShareAppMessage',\n             'onMenuShareQQ',\n             'onMenuShareQZone',\n             'onMenuShareWeibo',\n             'updateAppMessageShareData',\n             'updateTimelineShareData',\n           ]\n         }) {\n    this.wxConfig = {\n      debug: debug,\n      appId: appId,\n      timestamp: timestamp,\n      nonceStr: nonceStr,\n      signature: signature,\n      jsApiList: jsApiList\n    };\n    return this;\n  };\n\n  /**\n   * setReadyCallBack\n   * @param readyCallBack\n   * @return {WxShare}\n   */\n  setReadyCallBack(readyCallBack = () => {\n  }) {\n    this.readyCallBack = readyCallBack;\n    return this;\n  };\n\n  /**\n   * setShareSuccessCallBack\n   * @param shareSuccessCallBack\n   * @return {WxShare}\n   */\n  setShareSuccessCallBack(shareSuccessCallBack = () => {\n  }) {\n    this.shareSuccessCallBack = shareSuccessCallBack;\n    return this;\n  };\n\n  /**\n   * setDefaultShare\n   * @param defaultShare\n   * @return {WxShare}\n   */\n  setDefaultShare(defaultShare = {}) {\n    this.defaultShare = objectAssign({}, this.defaultShare, defaultShare);\n    this._isInitDefaultShare = true;\n    return this;\n  };\n\n  /**\n   * share\n   * @param shareData\n   *  {\n   *    title: '',\n   *    link: '',\n   *    desc: '',\n   *    imgUrl: ''\n   *  }\n   * @returns {Promise<any | never>}\n   */\n  share(shareData = {}) {\n    if (!this._isInitDefaultShare) {\n      this.setDefaultShare(shareData);\n    }\n\n    shareData = objectAssign({}, this.defaultShare, shareData);\n\n    console.log(shareData);\n\n    return Promise.resolve()\n      .then(() => this._initWxSDK())\n      .then(() => this._ready())\n      .then(() => {\n        const _oldShareData = objectAssign({}, shareData, {\n          success: (res) => this.shareSuccessCallBack(res),\n        });\n\n        this.wx.onMenuShareWeibo(_oldShareData);\n\n        // discard\n        this.wx.onMenuShareTimeline(_oldShareData);\n        this.wx.onMenuShareAppMessage(_oldShareData);\n        this.wx.onMenuShareQQ(_oldShareData);\n        this.wx.onMenuShareQZone(_oldShareData);\n\n        // Above jssdk1.4\n        this.wx.updateAppMessageShareData(shareData, (res) => this.shareSuccessCallBack(res));\n        this.wx.updateTimelineShareData(shareData, (res) => this.shareSuccessCallBack(res));\n      });\n  };\n\n  /**\n   * backToDefault\n   * @return {*}\n   */\n  backToDefault() {\n    return this.share();\n  };\n\n  /**\n   * init Wechat JSSDK\n   * @return {Promise<any>}\n   * @private\n   */\n  _initWxSDK() {\n    return new Promise(resolve => {\n      const _setWX = () => {\n        console.log('set wx');\n        let oScript = document.createElement(\"script\");\n        oScript.type = \"text/javascript\";\n        oScript.onload = () => {\n          this.wx = window.wx;\n          resolve();\n        };\n        oScript.src = WX_JSSDK_URL;\n        document.querySelector('head').appendChild(oScript);\n      };\n\n      if (this.wx) {\n        resolve();\n      } else {\n        if (window.wx) {\n          console.log('has wx');\n          this.wx = window.wx;\n          resolve();\n        } else {\n          _setWX();\n        }\n      }\n    });\n  };\n\n  /**\n   * set wx.config\n   * @return {Promise<any>}\n   * @private\n   */\n  _ready() {\n    return new Promise(resolve => {\n      if (this.isConfigReady) {\n        resolve();\n      } else {\n        console.log('set wx.config');\n        this.wx.config(this.wxConfig);\n\n        this.wx.ready(() => {\n          this.isConfigReady = true;\n\n          if (this.readyCallBack) {\n            this.readyCallBack();\n          }\n\n          resolve();\n        });\n      }\n    });\n  };\n};\n\n\n"],"sourceRoot":""}